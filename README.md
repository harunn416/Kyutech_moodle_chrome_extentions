# Moodle便利ツール KIT (Chrome Extention)
> [!TIP]
> 実装して欲しい機能があったらどんどん書いてほしいです。

## 概要
九州工業大学のmoodle専用の拡張機能です。便利機能を随時追加していく予定です。

## インストール方法
[インストールリンク](https://github.com/harunn416/Kyutech_moodle_chrome_extentions)  

上のリンクから拡張機能をインストールしてください。


このファイルをダウンロードしてインストールすることもできます。その場合常に最新版が使えます。しかしバグもあるかもしれません。  
**この場合は同じアカウント上で同期が正常に行われない可能性があります。**

## 機能 (絶賛募集中)

### 時間割表でアクセス (ver1.0実装)
moodleのコース一覧を時間割形式で素早くアクセスできます。

### 提出物一覧に残り時間追加 **(実装予定)**
提出物一覧に残り時間を追加し、提出までの猶予を確認しやすくできます。

## 機能のリクエスト

Moodle Helper Extensionに実装してほしい機能のアイデアがありましたら、お気軽に [GitHub Issues](https://github.com/harunn416/chrome_Extensionis_moodle/issues) までお寄せください。

新しいIssueを作成する際は、`✨ 新機能の要望` テンプレートを選択し、詳細を記述していただけると助かります。

## 貢献
開発手伝ってくれる人がいたらうれしいな。結構適当です。  
興味あったら下記まで連絡を。  
~~だらだら開発してるから適当でもいいよ。~~

## ライセンス
このプロジェクトは、MITライセンスの下で公開されています。
詳細については、[LICENSE](LICENSE) ファイルを参照してください。

# 開発者向け
> [!IMPORTANT]  
> ``Webpack``を使っています。``Node.js`` ``npm``のインストールを推奨します。  
> なるべく``README``を参考に開発をしてください。

> [!WARNING]  
> ~~webpackでバンドルする際は``developmet``ではなく``production``を使用してください。拡張機能では``eval``が使用できないからです。コンソールで``npm run build``を実行すればいいようになってます。~~  
> 現在は``development``でも読み込むようになっています。``npm run dev``でもビルド(バンドル)可能です。

> [!CAUTION]
> **悪意のあるスクリプトを絶対に入れないでください！**  
> なるべくブラウザ内で処理を完結させるようにしてください。  
> また、学生情報(氏名や学籍番号など)の取り扱いは慎重になってください。取得しないに越したことはありません。

## 導入
1. gitファイルのコピー
1. npm で必要なライブラリを取得。``npm i``をターミナルで実行。
1. distファイルを出力しビルド(バンドル)する。``npm run dev``をターミナルで実行。本命の出力は``npm run build``を実行。
1. ブラウザの拡張機能タブの``パッケージ化されていない拡張機能を読み込む``から``dist``フォルダを読み込む。
> [!important]
> 拡張機能はルートディレクトリを読み込むのではなく、必ず``dist``フォルダを読み込んでください。``manifest.json``が読み込まれません。

## 機能実装

### ブランチの作成
新しい機能実装時は``develop``ブランチに**ブランチの作成**をしてください。全員が気持ちよく開発できるようにご協力お願いします。  
↓ 命名規則に関してはこちらに従うようにしてください。  
[ブランチの命名規則](https://qiita.com/Hashimoto-Noriaki/items/5d990e21351b331d2aa1)  
また、マージする際は**プルリクエストの作成**をお願いします。

### 実装ファイル作成
機能を実装する際は、``content_scripts``フォルダの中に機能に適した名前のフォルダを作ってください。

### JavaScript
JavaScriptファイルは``content.js``という名前にし、他のJavaScriptファイルは必要な関数を``content.js``でimportしてください。

### css
``content.js``ファイルにインポートしてください。

### アセット
アセット(jpg,png,json,etc...)は、``assets``の中に機能実装の際につけた名前と同じフォルダを作成し入れてください。参照は``assets/[機能名]/[ファイル名]``で取得できます。ブラウザは``dist``ファオルダ内のjsファイルを起点に参照するので。

### manifest.json
1. ``webpack.config.js``の``entry``の中に以下の内容を追加してください。[機能名]の部分はJSファイルを入れたフォルダ名になります。
```
'[機能名]':'./content_scripts/[機能名]/content.js',
```
2. ``manifest.json.ejs``の``"content_scripts"``の中に以下の要素を追加してください。[機能名]の部分はJSファイルを入れたフォルダ名になります。
```
{
    "matches": ["https://*.kyutech.ac.jp/*"],
    "js": ["js/[機能名].bundle.js"]
},
```
> [!TIP]
> ``matches``の部分はJSファイルが動いてほしいURLを記述する部分です。``*``は任意の文字列となっています。なので、
> ```
> https://*.kyutech.ac.jp/*
> ```
> はmoodleのすべてのサイトで実行され、
> ```
> https://*.kyutech.ac.jp/my/courses.php*
> ```
> は``マイコース``タブでしか実行されません。
> 最後に``*``がついているのはプレースホルダに対応するためです。(``?=``みたいなやつ)

### メインブランチにマージ
developブランチにマージする際は**プルリクエスト**を作成してください。  
**mainブランチには基本的にマージしないでください。**  

もしもプルリクエストの承認に時間がかかっている場合は連絡してください。

## contents_scripts/ fun
ちょっとした遊び心です。隠し機能みたいな？

# バージョン
## v1.0.0
リリース

### v1.0.1
「カード」「リスト」「概要」の3つのコースの表示形式に対応。また表示形式を切り替えた場合でも時間割追加ボタンを追加。

### v1.0.2
コースの種類を選ぶプルダウンを押したときに、各コースに「時間割を追加」ボタンが無限に増え続けるバグを修正。

# 開発者
## Harukomugi (はるこむぎ)
Discordのサーバーリンク : https://discord.gg/A8P3VnXbM9
